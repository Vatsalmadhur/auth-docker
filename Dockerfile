ARG NODE_VERSION=18.0.0

FROM node:${NODE_VERSION}-alpine

ARG PORT
ARG MONGO_URI
ARG JWT_SECRET
ARG REFRESH_SECRET
ARG EMAIL
ARG PASS

ENV PORT $PORT
ENV MONGO_URI $MONGO_URI
ENV JWT_SECRET $JWT_SECRET
ENV REFRESH_SECRET $REFRESH_SECRET
ENV EMAIL $EMAIL
ENV PASS $PASS

WORKDIR /app

COPY package.json package-lock.json ./

RUN npm install

COPY . ./

EXPOSE 3000

CMD npm start
